{% extends 'base.html' %}
{% block title %}
{% endblock %}

{% block content %}
{% comment %} 게시글 목록 화면  {% endcomment %}
<div class="container">
<!-- Modal -->
{% if user.is_authenticated %}
    <div class="d-flex"><a class="ml-auto p-3" href="{% url 'community:create' %}">글쓰기</a></div>

{% else %}
<button type="button" class="btn btn-primary d-flex ml-auto m-2" data-toggle="modal" data-target="#myModal"> 글쓰기 </button>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <h5 class="modal-title">경고</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        비회원은 권한이 없습니다.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div></div>
{% endif %}

    <div class="table-responsive">
        <table class="table">
            <thead>
            </thead>
            <tbody>
             {% for object in object_list %}
                <tr>
                    <td><a href="{% url 'community:detail' object.id %}"><img src="{{ object.image.url }}" alt="..." class="img-thumbnail" style="width:100px;height:100px;"></a></td>
                    <th scope="row"><a href="{% url 'community:detail' object.id %}">{{object.title}}</a></th>
                    <td>{{object.created}}</td>
                    <td>{{object.author}}</td>
                    {% comment %} <td>공감 비공감 조회수</td> {% endcomment %}
                    <td> 공감 <span class=""> {{ object.like.all.count}} </span> </td>
                    <td> 비공감 <span class=""> {{ object.unlike.all.count}} </span> </td>
                    <td> 조회수 <span class=""> {{ object.hits }} </span> </td>
                </tr>
             {% endfor %}
        </table>
    </div>
</div>

    {% comment %} <div class="pagination">
      <span class="page-links">
        {% if page_obj.has_previous %}
        <span >
          <a href="{{ request.path }}?page={{ page_obj.previous_page_number }}">previous</a>
        </span>
        {% endif %}
        <span class="page-current">
          <p>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</p>
        </span>
        {% if page_obj.has_next %}
        <span>
          <a href="{{ request.path }}?page={{ page_obj.next_page_number }}">next</a>
        </span>
        {% endif %}
      </span>
    </div> {% endcomment %}

    <div style="text-align: center">
    <nav class="full-pagination" aria-label="Page navigation example">
       <ul class="pagination pagination-sm">
        {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number}}">&laquo;</a></li>
        {% else %}
            <li class="page-item disabled "><span class="page-link">&laquo;</span></li>
        {% endif %}
        {% for i in paginator.page_range %}
            {% if page_obj.number == i %}
            <li class="page-item active"><span class="page-link">{{ i }}<span class="sr-only">(current)</span></span></li>
            {% else %}
            <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
        {% else %}
            <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
        {% endif %}
        </ul>
    </nav>
    </div>

{% endblock %} 