{% extends 'base.html' %}
{% block title %}
{% endblock %}

{% block content %}
{% comment %} 게시글 목록 화면  {% endcomment %}
<div class="container">
<!----Category menu -->
<div class="col text-center my-4">
  {% for item in cat_menu %}
      <a style="font-size: 24px;margin: 6%;" href="{% url 'community:category' item %}"> {{ item }}</a>
  {%endfor%}
</div>
<!-- Modal -->
{% if user.is_authenticated %}
    <div class="d-flex"><a class="ml-auto p-3" href="{% url 'community:create' %}">글쓰기</a></div>
    <div class="d-flex"><a class="ml-auto p-3" href="{% url 'community:favorite_list' %}">스크랩한 게시물</a></div>

{% else %}
<button type="button" class="btn btn-primary d-flex ml-auto m-2" data-toggle="modal" data-target="#myModal"> 글쓰기 </button>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <h5 class="modal-title">경고</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        비회원은 권한이 없습니다.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div></div>
{% endif %}

    <div class="table-responsive">
        <table class="table">
            <thead>
            </thead>
            <tbody>
             {% for object in object_list %}
                <tr>
                    <td><a href="{% url 'community:detail' object.id %}">
                        {% if object.image %}
                        <img src="{{ object.image.url }}" alt="..." class="img-thumbnail" style="width:100px;height:100px;">
                        {% else %}
                        <img src="/static/image/garden.png" alt="..." class="img-thumbnail" style="width:100px;height:100px;">
                        {% endif %}
                    </a></td>
                    <th scope="row"><a href="{% url 'community:detail' object.id %}">{{object.title}}</a></th>
                    <td>{{object.created}}</td>
                    <td>{{object.author}}</td>
                    {% comment %} <td>공감 비공감 조회수</td> {% endcomment %}
                    <td> 공감 <span class=""> {{ object.like.all.count}} </span> </td>
                    <td> 비공감 <span class=""> {{ object.unlike.all.count}} </span> </td>
                    <td> 조회수 <span class=""> {{ object.hits }} </span> </td>
                </tr>
             {% endfor %}
        </table>
    </div>
</div>
{% include 'community/pagination.html' %}

{% endblock %} 